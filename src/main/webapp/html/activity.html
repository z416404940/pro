<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../lib/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/nav.css" type="text/css"/>
    <script src="../lib/js/jquery-3.4.1.js"></script>
    <script src="../lib/js/vue.js"></script>
    <script src="../lib/js/vue-resource.min.js"></script>
</head>
<body>
<nav>

</nav>
<hr>
<div class="center" style="width: 100%"></div>
<div id="vue">
<section class="layui-col-md-offset2 layui-col-xs-offset0 layui-col-xs8 out layui-card" style="min-width: 1000px;overflow: hidden">
    <div class="layui-card layui-row layui-col-space15">
        <div class="out layui-col-md3" style="width: 25%;height: 300px">
            <img :src="image.imgUrl" style="width: 100%;height: 100%">
        </div>
        <div class="out layui-col-md9" style="width: 75%;height: 300px">
            <div class="out" style="height: 12%;padding-top: 10PX"><h1>{{activity.title}}</h1></div>
            <div class="layui-card-body" style="height: 58%">
                <div STYLE="margin-top: 10PX">时间：{{activity.movieStartTime}}--{{activity.movieEndTime}}</div>
                <div STYLE="margin-top: 10PX">地点：{{activity.city}} {{activity.cinemaAddress}}</div>
                <div STYLE="margin-top: 10PX">费用：60</div>
                <div STYLE="margin-top: 10PX">类型：剧情</div>
                <div STYLE="margin-top: 10PX">主办方：{{movieGroup.name}}观影团</div>
            </div>
            <div class="layui-breadcrumb" lay-separator="|" style="margin-left: 10px">
                <a><cite>0人想去</cite></a>
                <a><cite>{{applyNum}}人报名</cite></a>
            </div>
            <div class="out" style="margin: 7px 0 0 0">
                <button class="layui-btn layui-btn-warm radius" style="border-radius: 7px" href="">想去</button>
                <button data-method="notice" class="layui-btn layui-btn-danger radius signUp" style="border-radius: 7px" href="">报名参加</button>
            </div>
        </div>
    </div>
    <div class="out">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend style="color: #1c7430">影片简介</legend>
        </fieldset>
        <div class="layui-card">
            <div style="padding: 20px; background-color: #F2F2F2;">
                <div class="layui-row layui-col-space15">
                    <div class="">
                        <div class="layui-card">
                            <div class="layui-card-header">{{videos.intro}}</div>
                            <div class="layui-card-body">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend  style="color: #1c7430">活动须知</legend>
            <div>
                <!--{{activity.content}}-->
            </div>
        </fieldset>
        <div class="layui-card">
            <div style="padding: 20px; background-color: #F2F2F2;">
                <div class="layui-row layui-col-space15">
                    <div class="">
                        <div class="layui-card">
                            <div class="layui-card-header">活动要求</div>
                            <div class="layui-card-body">
                                <ul>
                                    <li>1.点击“参加活动”，留下你的信息</li>
                                    <li>2.观影后打分提交有质量观后感</li>
    <!--                                            <li>3.转发活动动态</li>-->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend  style="color: #1c7430">活动流程</legend>
        </fieldset>
        <ul class="layui-timeline">
            <li class="layui-timeline-item">
                <i class="layui-icon layui-timeline-axis"></i>
                <div class="layui-timeline-content layui-text">
                    <h3 class="layui-timeline-title">
                        {{activity.startApplyTime}}
                    </h3>
                    <p>
                        开启报名
                    </p>
                    <ul>
                    </ul>
                </div>
            </li>
            <li class="layui-timeline-item">
                <i class="layui-icon layui-timeline-axis"></i>
                <div class="layui-timeline-content layui-text">
                    <h3 class="layui-timeline-title">
                        {{activity.endApplyTime}}
                    </h3>
                    <p>
                        报名截止
                    </p>
                </div>
            </li>
            <li class="layui-timeline-item">
                <i class="layui-icon layui-timeline-axis"></i>
                <div class="layui-timeline-content layui-text">
                    <h3 class="layui-timeline-title">
                        {{activity.movieStartTime}}
                    </h3>
                    <p>
                        放映开始
                    </p>
                </div>
            </li>
            <li class="layui-timeline-item">
                <i class="layui-icon layui-timeline-axis"></i>
                <div class="layui-timeline-content layui-text">
                    <h3 class="layui-timeline-title">
                        {{activity.movieEndTime}}
                    </h3>
                    <p>
                        放映结束
                    </p>
                </div>
            </li>
            <li class="layui-timeline-item">
                <i class="layui-icon layui-timeline-axis"></i>
                <div class="layui-timeline-content layui-text">
                    <h3 class="layui-timeline-title">

                    </h3>
                    <p>
                        互动--结束
                    </p>
                </div>
            </li>
        </ul>
    </div>
</section>
</div>
<script src="../lib/js/jquery-3.4.1.js"></script>
<script src="../lib/layui/layui.js" charset="utf-8"></script>
<script type="module" src="../js/nav.js"></script>
<script type="module" src="../js/navEl.js"></script>
<script>

    var vue = new Vue({
        el:'#vue',
        data: {
            activity:'',
            applyNum:0,
            videos:'',
            image:'',
            movieGroup:'',
            aId:1
        },
        beforeCreate:function() {
            this.aId=getArgs("aId")===undefined?1:getArgs("aId")
            this.$http.get('/activity/get?a_id='+this.aId).then(res =>{
                this.activity = res.body.activity;
                this.applyNum = res.body.applyNum;
                this.videos = res.body.videos;
                this.image = res.body.image;
                this.movieGroup = res.body.movieGroup;
                console.log(this.activity)
                console.log(this.applyNum)
                console.log(this.videos)
                console.log(this.image)
                console.log(this.movieGroup)
            }).catch(err => {});
        },
        methods : {

        },
    });
    function getArgs(strParame) {
        var args = new Object( );
        var query = location.search.substring(1);
        var pairs = query.split("&"); // Break at ampersand
        for(var i = 0; i < pairs.length; i++) {
            var pos = pairs[i].indexOf("=");
            if (pos == -1) continue;
            var argname = pairs[i].substring(0,pos);
            var value = pairs[i].substring(pos+1);
            value = decodeURIComponent(value);
            args[argname] = value;
        }
        return args[strParame];
    }
    layui.use('layer', function(){ //独立版的layer无需执行这一句
        var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句
        //触发事件
        var active = {
            notice: function(){
                //示范一个公告层
                layer.open({
                    type: 1
                    ,title: false //不显示标题栏
                    ,closeBtn: false
                    ,area: '300px;'
                    ,shade: 0.8
                    ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
                    ,btn: ['取消', '提交']
                    ,btnAlign: 'c'
                    ,moveType: 1 //拖拽模式，0或者1
                    ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">' +
                        '确认报名' +
                            '<form name="sign" action="">' +
                        // '<input type="text">' +
                        '<br><br>' +
                        '<br> <br>' +
                        '</form>' +
                        '<br>摸鱼的征途是星辰大海!</div>'
                    ,success: function(layero){
                        var btn = layero.find('.layui-layer-btn');
                        btn.find('.layui-layer-btn0').attr({
                            // document.sign.submit()
                        });
                    }
                });
            }
        };
        $('.signUp').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
    });

</script>
<script src="../lib/bootstrap-4.3.1-dist/js/bootstrap.js"></script>
<script src="../lib/bootstrap-4.3.1-dist/js/bootstrap.bundle.js"></script>
</body>
</html>